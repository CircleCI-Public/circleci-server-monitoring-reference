{
    "__inputs": [
     {
      "name": "DS_PROMETHEUS",
      "label": "Prometheus",
      "description": "",
      "type": "datasource",
      "pluginId": "prometheus",
      "pluginName": "Prometheus"
     }
    ],
    "__elements": {},
    "__requires": [
     {
      "type": "grafana",
      "id": "grafana",
      "name": "Grafana",
      "version": "11.5.2"
     },
     {
      "type": "datasource",
      "id": "prometheus", 
      "name": "Prometheus",
      "version": "1.0.0"
     },
     {
      "type": "panel",
      "id": "timeseries",
      "name": "Time series",
      "version": ""
     }
    ],
    "annotations": {
     "list": []
    },
    "description": "This dashboard provides RED metrics monitoring for Tempo distributed tracing.\n",
    "editable": true,
    "fiscalYearStartMonth": 0,
    "graphTooltip": 0,
    "id": null,
    "links": [],
    "panels": [
     {
      "collapsed": false,
      "gridPos": {
       "h": 1,
       "w": 24,
       "x": 0,
       "y": 0
      },
      "id": 1,
      "panels": [],
      "title": "Request Performance (RED)",
      "type": "row"
     },
     {
      "datasource": {
       "type": "prometheus",
       "uid": "${DS_PROMETHEUS}"
      },
      "fieldConfig": {
       "defaults": {
        "color": {
         "mode": "palette-classic"
        },
        "custom": {
         "axisBorderShow": false,
         "axisCenteredZero": false,
         "axisColorMode": "text",
         "axisLabel": "",
         "axisPlacement": "auto",
         "barAlignment": 0,
         "barWidthFactor": 0.6,
         "drawStyle": "bars",
         "fillOpacity": 10,
         "gradientMode": "none",
         "hideFrom": {
          "legend": false,
          "tooltip": false,
          "viz": false
         },
         "insertNulls": false,
         "lineInterpolation": "linear",
         "lineWidth": 1,
         "pointSize": 5,
         "scaleDistribution": {
          "type": "linear"
         },
         "showPoints": "auto",
         "spanNulls": false,
         "stacking": {
          "group": "A",
          "mode": "normal"
         },
         "thresholdsStyle": {
          "mode": "off"
         }
        },
        "mappings": [],
        "thresholds": {
         "mode": "absolute",
         "steps": [
          {
           "color": "green",
           "value": null
          }
         ]
        }
       },
       "overrides": [
        {
         "matcher": {
          "id": "byRegexp",
          "options": "2.*"
         },
         "properties": [
          {
           "id": "color",
           "value": {
            "fixedColor": "green",
            "mode": "fixed"
           }
          }
         ]
        },
        {
         "matcher": {
          "id": "byRegexp", 
          "options": "4.*"
         },
         "properties": [
          {
           "id": "color",
           "value": {
            "fixedColor": "orange", 
            "mode": "fixed"
           }
          }
         ]
        },
        {
         "matcher": {
          "id": "byRegexp",
          "options": "5.*"
         },
         "properties": [
          {
           "id": "color",
           "value": {
            "fixedColor": "red",
            "mode": "fixed"
           }
          }
         ]
        }
       ]
      },
      "gridPos": {
       "h": 8,
       "w": 12,
       "x": 0,
       "y": 1
      },
      "id": 2,
      "options": {
       "legend": {
        "calcs": [],
        "displayMode": "list",
        "placement": "bottom",
        "showLegend": true
       },
       "tooltip": {
        "mode": "single",
        "sort": "none"
       }
      },
      "targets": [
       {
        "datasource": {
         "type": "prometheus",
         "uid": "${DS_PROMETHEUS}"
        },
        "expr": "sum by (status_code) (rate(tempo_request_duration_seconds_count{job=\"tempo-server-monitoring-tempo\"}[5m]))",
        "interval": "",
        "legendFormat": "{{status_code}}",
        "refId": "A"
       }
      ],
      "title": "API Requests per Second",
      "type": "timeseries"
     },
     {
      "datasource": {
       "type": "prometheus",
       "uid": "${DS_PROMETHEUS}"
      },
      "fieldConfig": {
       "defaults": {
        "color": {
         "mode": "palette-classic"
        },
        "custom": {
         "axisBorderShow": false,
         "axisCenteredZero": false,
         "axisColorMode": "text",
         "axisLabel": "ms",
         "axisPlacement": "auto",
         "barAlignment": 0,
         "barWidthFactor": 0.6,
         "drawStyle": "line",
         "fillOpacity": 0,
         "gradientMode": "none",
         "hideFrom": {
          "legend": false,
          "tooltip": false,
          "viz": false
         },
         "insertNulls": false,
         "lineInterpolation": "linear",
         "lineWidth": 1,
         "pointSize": 5,
         "scaleDistribution": {
          "type": "linear"
         },
         "showPoints": "auto",
         "spanNulls": false,
         "stacking": {
          "group": "A",
          "mode": "none"
         },
         "thresholdsStyle": {
          "mode": "off"
         }
        },
        "mappings": [],
        "thresholds": {
         "mode": "absolute",
         "steps": [
          {
           "color": "green",
           "value": null
          }
         ]
        },
        "unit": "ms"
       },
       "overrides": []
      },
      "gridPos": {
       "h": 8,
       "w": 12,
       "x": 12,
       "y": 1
      },
      "id": 3,
      "options": {
       "legend": {
        "calcs": [],
        "displayMode": "list",
        "placement": "bottom",
        "showLegend": true
       },
       "tooltip": {
        "mode": "single",
        "sort": "none"
       }
      },
      "targets": [
       {
        "datasource": {
         "type": "prometheus",
         "uid": "${DS_PROMETHEUS}"
        },
        "expr": "histogram_quantile(0.99, sum(rate(tempo_request_duration_seconds_bucket{job=\"tempo-server-monitoring-tempo\"}[5m])) by (le,route)) * 1000",
        "interval": "",
        "legendFormat": "{{route}} 99th",
        "refId": "A"
       },
       {
        "datasource": {
         "type": "prometheus",
         "uid": "${DS_PROMETHEUS}"
        },
        "expr": "histogram_quantile(0.50, sum(rate(tempo_request_duration_seconds_bucket{job=\"tempo-server-monitoring-tempo\"}[5m])) by (le,route)) * 1000",
        "interval": "",
        "legendFormat": "{{route}} 50th",
        "refId": "B"
       }
      ],
      "title": "API Latency by Route",
      "type": "timeseries"
     },
     {
      "collapsed": false,
      "gridPos": {
       "h": 1,
       "w": 24,
       "x": 0,
       "y": 9
      },
      "id": 4,
      "panels": [],
      "title": "Resource & Health Metrics",
      "type": "row"
     },
     {
      "datasource": {
       "type": "prometheus",
       "uid": "${DS_PROMETHEUS}"
      },
      "fieldConfig": {
       "defaults": {
        "color": {
         "mode": "palette-classic"
        },
        "custom": {
         "axisBorderShow": false,
         "axisCenteredZero": false,
         "axisColorMode": "text",
         "axisLabel": "%",
         "axisPlacement": "auto",
         "barAlignment": 0,
         "barWidthFactor": 0.6,
         "drawStyle": "line",
         "fillOpacity": 0,
         "gradientMode": "none",
         "hideFrom": {
          "legend": false,
          "tooltip": false,
          "viz": false
         },
         "insertNulls": false,
         "lineInterpolation": "linear",
         "lineWidth": 1,
         "pointSize": 5,
         "scaleDistribution": {
          "type": "linear"
         },
         "showPoints": "auto",
         "spanNulls": false,
         "stacking": {
          "group": "A",
          "mode": "none"
         },
         "thresholdsStyle": {
          "mode": "off"
         }
        },
        "mappings": [],
        "thresholds": {
         "mode": "absolute",
         "steps": [
          {
           "color": "green",
           "value": null
          }
         ]
        },
        "unit": "percent"
       },
       "overrides": []
      },
      "gridPos": {
       "h": 8,
       "w": 8,
       "x": 0,
       "y": 10
      },
      "id": 5,
      "options": {
       "legend": {
        "calcs": [],
        "displayMode": "list",
        "placement": "bottom",
        "showLegend": true
       },
       "tooltip": {
        "mode": "single",
        "sort": "none"
       }
      },
      "targets": [
       {
        "datasource": {
         "type": "prometheus",
         "uid": "${DS_PROMETHEUS}"
        },
        "expr": "rate(process_cpu_seconds_total{job=\"tempo-server-monitoring-tempo\"}[5m]) * 100",
        "interval": "",
        "legendFormat": "CPU %",
        "refId": "A"
       }
      ],
      "title": "CPU Usage",
      "type": "timeseries"
     },
     {
      "datasource": {
       "type": "prometheus",
       "uid": "${DS_PROMETHEUS}"
      },
      "fieldConfig": {
       "defaults": {
        "color": {
         "mode": "palette-classic"
        },
        "custom": {
         "axisBorderShow": false,
         "axisCenteredZero": false,
         "axisColorMode": "text",
         "axisLabel": "MB",
         "axisPlacement": "auto",
         "barAlignment": 0,
         "barWidthFactor": 0.6,
         "drawStyle": "line",
         "fillOpacity": 0,
         "gradientMode": "none",
         "hideFrom": {
          "legend": false,
          "tooltip": false,
          "viz": false
         },
         "insertNulls": false,
         "lineInterpolation": "linear",
         "lineWidth": 1,
         "pointSize": 5,
         "scaleDistribution": {
          "type": "linear"
         },
         "showPoints": "auto",
         "spanNulls": false,
         "stacking": {
          "group": "A",
          "mode": "none"
         },
         "thresholdsStyle": {
          "mode": "off"
         }
        },
        "mappings": [],
        "thresholds": {
         "mode": "absolute",
         "steps": [
          {
           "color": "green",
           "value": null
          }
         ]
        },
        "unit": "decbytes"
       },
       "overrides": []
      },
      "gridPos": {
       "h": 8,
       "w": 8,
       "x": 8,
       "y": 10
      },
      "id": 6,
      "options": {
       "legend": {
        "calcs": [],
        "displayMode": "list",
        "placement": "bottom",
        "showLegend": true
       },
       "tooltip": {
        "mode": "single",
        "sort": "none"
       }
      },
      "targets": [
       {
        "datasource": {
         "type": "prometheus",
         "uid": "${DS_PROMETHEUS}"
        },
        "expr": "process_resident_memory_bytes{job=\"tempo-server-monitoring-tempo\"}",
        "interval": "",
        "legendFormat": "Memory",
        "refId": "A"
       }
      ],
      "title": "Memory Usage",
      "type": "timeseries"
     },
     {
      "datasource": {
       "type": "prometheus",
       "uid": "${DS_PROMETHEUS}"
      },
      "fieldConfig": {
       "defaults": {
        "color": {
         "mode": "palette-classic"
        },
        "custom": {
         "axisBorderShow": false,
         "axisCenteredZero": false,
         "axisColorMode": "text",
         "axisLabel": "",
         "axisPlacement": "auto",
         "barAlignment": 0,
         "barWidthFactor": 0.6,
         "drawStyle": "line",
         "fillOpacity": 0,
         "gradientMode": "none",
         "hideFrom": {
          "legend": false,
          "tooltip": false,
          "viz": false
         },
         "insertNulls": false,
         "lineInterpolation": "linear",
         "lineWidth": 1,
         "pointSize": 5,
         "scaleDistribution": {
          "type": "linear"
         },
         "showPoints": "auto",
         "spanNulls": false,
         "stacking": {
          "group": "A",
          "mode": "none"
         },
         "thresholdsStyle": {
          "mode": "off"
         }
        },
        "mappings": [],
        "max": 1,
        "min": 0,
        "thresholds": {
         "mode": "absolute",
         "steps": [
          {
           "color": "green",
           "value": null
          }
         ]
        }
       },
       "overrides": []
      },
      "gridPos": {
       "h": 8,
       "w": 8,
       "x": 16,
       "y": 10
      },
      "id": 7,
      "options": {
       "legend": {
        "calcs": [],
        "displayMode": "list",
        "placement": "bottom",
        "showLegend": true
       },
       "tooltip": {
        "mode": "single",
        "sort": "none"
       }
      },
      "targets": [
       {
        "datasource": {
         "type": "prometheus",
         "uid": "${DS_PROMETHEUS}"
        },
        "expr": "up{job=\"tempo-server-monitoring-tempo\"}",
        "interval": "",
        "legendFormat": "Status",
        "refId": "A"
       }
      ],
      "title": "Service Status",
      "type": "timeseries"
     }
    ],
    "refresh": "30s",
    "schemaVersion": 40,
    "tags": ["tempo", "tracing"],
    "templating": {
     "list": []
    },
    "time": {
     "from": "now-1h",
     "to": "now"
    },
    "timepicker": {},
    "timezone": "utc",
    "title": "Tempo Monitoring",
    "uid": null,
    "version": 1,
    "weekStart": ""
   }